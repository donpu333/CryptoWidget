<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Слайд-шоу для больших изображений 4000×3000</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #e0e0e0;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(30, 30, 46, 0.8);
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);
            padding: 25px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #6ab0f3;
            text-shadow: 0 0 10px rgba(106, 176, 243, 0.7);
            font-size: 2.5rem;
        }
        
        .upload-section {
            background: rgba(40, 40, 56, 0.7);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
            text-align: center;
            border: 2px dashed #6ab0f3;
        }
        
        .upload-btn {
            display: inline-block;
            padding: 15px 30px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            margin: 15px;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .upload-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.6);
        }
        
        .slideshow-container {
            position: relative;
            height: 600px;
            overflow: hidden;
            border-radius: 12px;
            margin-bottom: 25px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);
            background: #000;
        }
        
        .slide {
            position: absolute;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1.2s ease;
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .slide-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            opacity: 0;
            transition: opacity 1s ease;
        }
        
        .slide.active .slide-img {
            opacity: 1;
        }
        
        .slide.active {
            opacity: 1;
        }
        
        .slide-number {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 18px;
            border-radius: 25px;
            font-size: 16px;
            z-index: 10;
            backdrop-filter: blur(5px);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);
        }
        
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(52, 152, 219, 0.5);
        }
        
        button:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .fullscreen-btn {
            background: linear-gradient(45deg, #9b59b6, #8e44ad);
        }
        
        .fullscreen-btn:hover {
            background: linear-gradient(45deg, #8e44ad, #7d3c98);
        }
        
        .settings {
            background: rgba(40, 40, 56, 0.7);
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 25px;
        }
        
        .settings h2 {
            margin-bottom: 20px;
            color: #6ab0f3;
            font-size: 1.5rem;
            text-align: center;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
            color: #e0e0e0;
            font-size: 1.1rem;
        }
        
        input[type="range"] {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            background: linear-gradient(90deg, #3498db, #9b59b6);
            border-radius: 10px;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #fff;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
        }
        
        .value-display {
            display: inline-block;
            margin-left: 15px;
            font-weight: bold;
            color: #6ab0f3;
            font-size: 1.1rem;
        }
        
        .progress-bar {
            height: 8px;
            background: #3c3c3c;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 25px;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #9b59b6);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .thumbnails {
            display: flex;
            gap: 15px;
            overflow-x: auto;
            padding: 20px 0;
            background: rgba(40, 40, 56, 0.7);
            border-radius: 12px;
            margin-bottom: 25px;
        }
        
        .thumbnail {
            width: 120px;
            height: 90px;
            border-radius: 8px;
            cursor: pointer;
            opacity: 0.6;
            transition: all 0.3s;
            background-size: cover;
            background-position: center;
            border: 2px solid transparent;
            flex-shrink: 0;
        }
        
        .thumbnail:hover {
            opacity: 0.8;
            transform: scale(1.05);
        }
        
        .thumbnail.active {
            opacity: 1;
            border: 2px solid #3498db;
            box-shadow: 0 0 15px rgba(52, 152, 219, 0.7);
        }
        
        .fullscreen-mode {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.98);
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 20px;
        }
        
        .fullscreen-slide {
            width: 100%;
            height: 90%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .fullscreen-img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .fullscreen-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 25px;
        }
        
        .fullscreen-close {
            position: absolute;
            top: 25px;
            right: 25px;
            font-size: 35px;
            color: white;
            background: rgba(255, 0, 0, 0.3);
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: all 0.3s;
            backdrop-filter: blur(5px);
        }
        
        .fullscreen-close:hover {
            background: rgba(255, 0, 0, 0.6);
            transform: rotate(90deg) scale(1.1);
        }
        
        .hidden {
            display: none;
        }
        
        .status-message {
            text-align: center;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            background: rgba(40, 40, 56, 0.7);
            color: #e0e0e0;
            font-size: 1.1rem;
        }
        
        .image-info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            z-index: 10;
            backdrop-filter: blur(5px);
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .slideshow-container {
                height: 400px;
            }
            
            button {
                padding: 12px 20px;
                font-size: 14px;
            }
            
            .thumbnail {
                width: 100px;
                height: 75px;
            }
            
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Слайд-шоу для изображений 4000×3000</h1>
        
        <div class="upload-section">
            <h2>Загрузка больших изображений</h2>
            <input type="file" id="folderInput" webkitdirectory directory multiple class="hidden">
            <button class="upload-btn" id="folderBtn">Выбрать папку с изображениями</button>
            <p class="status-message" id="statusMessage">Выберите папку с изображениями для начала. Поддерживаются большие файлы до 4000×3000 пикселей.</p>
        </div>
        
        <div class="slideshow-container" id="slideshow">
            <div class="slide-number" id="slideNumber">0 / 0</div>
            <div class="image-info" id="imageInfo">Размер: 0×0</div>
            <!-- Слайды будут добавлены через JavaScript -->
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <div class="controls">
            <button id="prevBtn">Назад</button>
            <button id="playPauseBtn">Пауза</button>
            <button id="nextBtn">Вперед</button>
            <button id="fullscreenBtn" class="fullscreen-btn">Полный экран</button>
        </div>
        
        <div class="settings">
            <h2>Настройки слайд-шоу</h2>
            
            <div class="form-group">
                <label for="interval">Интервал между слайдами: <span id="intervalValue" class="value-display">15</span> секунд</label>
                <input type="range" id="interval" min="5" max="60" value="15">
            </div>
            
            <div class="form-group">
                <label for="transition">Скорость перехода: <span id="transitionValue" class="value-display">1.5</span> секунд</label>
                <input type="range" id="transition" min="0.5" max="5" step="0.1" value="1.5">
            </div>
        </div>
        
        <div class="thumbnails" id="thumbnails">
            <!-- Миниатюры будут добавлены через JavaScript -->
        </div>
    </div>

    <div class="fullscreen-mode hidden" id="fullscreenMode">
        <div class="fullscreen-slide" id="fullscreenSlide">
            <img class="fullscreen-img" id="fullscreenImg" src="" alt="">
        </div>
        <div class="fullscreen-controls">
            <button id="fsPrevBtn">Назад</button>
            <button id="fsPlayPauseBtn">Пауза</button>
            <button id="fsNextBtn">Вперед</button>
        </div>
        <div class="fullscreen-close" id="fullscreenClose">×</div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Элементы DOM
            const slideshow = document.getElementById('slideshow');
            const progress = document.getElementById('progress');
            const prevBtn = document.getElementById('prevBtn');
            const playPauseBtn = document.getElementById('playPauseBtn');
            const nextBtn = document.getElementById('nextBtn');
            const fullscreenBtn = document.getElementById('fullscreenBtn');
            const intervalInput = document.getElementById('interval');
            const intervalValue = document.getElementById('intervalValue');
            const transitionInput = document.getElementById('transition');
            const transitionValue = document.getElementById('transitionValue');
            const thumbnails = document.getElementById('thumbnails');
            const folderInput = document.getElementById('folderInput');
            const folderBtn = document.getElementById('folderBtn');
            const statusMessage = document.getElementById('statusMessage');
            const slideNumber = document.getElementById('slideNumber');
            const imageInfo = document.getElementById('imageInfo');
            const fullscreenMode = document.getElementById('fullscreenMode');
            const fullscreenImg = document.getElementById('fullscreenImg');
            const fsPrevBtn = document.getElementById('fsPrevBtn');
            const fsPlayPauseBtn = document.getElementById('fsPlayPauseBtn');
            const fsNextBtn = document.getElementById('fsNextBtn');
            const fullscreenClose = document.getElementById('fullscreenClose');
            
            // Состояние слайд-шоу
            let currentSlideIndex = 0;
            let isPlaying = true;
            let intervalId = null;
            let intervalTime = parseInt(intervalInput.value) * 1000;
            let transitionTime = parseFloat(transitionInput.value) * 1000;
            let images = [];
            let imageSizes = [];
            
            // Инициализация
            disableControls();
            
            // Обработчики событий для загрузки папки
            folderBtn.addEventListener('click', () => {
                folderInput.click();
            });
            
            folderInput.addEventListener('change', function(event) {
                const files = event.target.files;
                images = [];
                imageSizes = [];
                
                // Фильтруем только изображения
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    if (file.type.match('image.*')) {
                        const url = URL.createObjectURL(file);
                        images.push(url);
                        
                        // Получаем размеры изображения
                        const img = new Image();
                        img.onload = function() {
                            imageSizes.push({width: this.width, height: this.height});
                            if (imageSizes.length === images.length && imageSizes.length > 0) {
                                updateImageInfo();
                            }
                        };
                        img.src = url;
                    }
                }
                
                if (images.length > 0) {
                    statusMessage.textContent = `Загружено ${images.length} изображений`;
                    initializeSlides();
                    enableControls();
                    startSlideshow();
                } else {
                    statusMessage.textContent = 'В выбранной папке нет изображений';
                }
            });
            
            // Обновление информации о размере изображения
            function updateImageInfo() {
                if (imageSizes[currentSlideIndex]) {
                    const size = imageSizes[currentSlideIndex];
                    imageInfo.textContent = `Размер: ${size.width}×${size.height}`;
                }
            }
            
            // Инициализация слайдов
            function initializeSlides() {
                slideshow.innerHTML = '<div class="slide-number" id="slideNumber">0 / 0</div><div class="image-info" id="imageInfo">Размер: 0×0</div>';
                thumbnails.innerHTML = '';
                
                images.forEach((image, index) => {
                    // Создание слайда
                    const slide = document.createElement('div');
                    slide.className = 'slide';
                    
                    const img = document.createElement('img');
                    img.className = 'slide-img';
                    img.src = image;
                    img.alt = `Слайд ${index + 1}`;
                    
                    slide.appendChild(img);
                    slideshow.appendChild(slide);
                    
                    // Создание миниатюры
                    const thumbnail = document.createElement('div');
                    thumbnail.className = 'thumbnail';
                    thumbnail.style.backgroundImage = `url(${image})`;
                    thumbnail.dataset.index = index;
                    
                    thumbnail.addEventListener('click', () => {
                        goToSlide(index);
                    });
                    
                    thumbnails.appendChild(thumbnail);
                });
                
                // Активируем первый слайд
                goToSlide(0);
            }
            
            // Переход к определенному слайду
            function goToSlide(index) {
                // Скрываем текущий слайд
                const slides = document.querySelectorAll('.slide');
                if (slides.length > 0) {
                    slides[currentSlideIndex].classList.remove('active');
                    document.querySelectorAll('.thumbnail')[currentSlideIndex].classList.remove('active');
                    
                    // Устанавливаем новый индекс
                    currentSlideIndex = index;
                    
                    // Показываем новый слайд
                    slides[currentSlideIndex].classList.add('active');
                    document.querySelectorAll('.thumbnail')[currentSlideIndex].classList.add('active');
                    
                    // Обновляем номер слайда
                    slideNumber.textContent = `${currentSlideIndex + 1} / ${images.length}`;
                    
                    // Обновляем информацию о размере
                    updateImageInfo();
                    
                    // Сбрасываем прогресс бар
                    resetProgressBar();
                    
                    // Обновляем полноэкранный режим, если активен
                    if (!fullscreenMode.classList.contains('hidden')) {
                        updateFullscreenSlide();
                    }
                }
            }
            
            // Следующий слайд
            function nextSlide() {
                if (images.length === 0) return;
                
                let nextIndex = currentSlideIndex + 1;
                if (nextIndex >= images.length) {
                    nextIndex = 0;
                }
                goToSlide(nextIndex);
            }
            
            // Предыдущий слайд
            function prevSlide() {
                if (images.length === 0) return;
                
                let prevIndex = currentSlideIndex - 1;
                if (prevIndex < 0) {
                    prevIndex = images.length - 1;
                }
                goToSlide(prevIndex);
            }
            
            // Запуск слайд-шоу
            function startSlideshow() {
                if (intervalId) {
                    clearInterval(intervalId);
                }
                
                if (images.length === 0) return;
                
                intervalId = setInterval(() => {
                    nextSlide();
                }, intervalTime);
                
                isPlaying = true;
                playPauseBtn.textContent = 'Пауза';
                fsPlayPauseBtn.textContent = 'Пауза';
                startProgressBar();
            }
            
            // Остановка слайд-шоу
            function stopSlideshow() {
                if (intervalId) {
                    clearInterval(intervalId);
                    intervalId = null;
                }
                
                isPlaying = false;
                playPauseBtn.textContent = 'Воспроизвести';
                fsPlayPauseBtn.textContent = 'Воспроизвести';
                stopProgressBar();
            }
            
            // Сброс прогресс бара
            function resetProgressBar() {
                progress.style.width = '0%';
            }
            
            // Запуск прогресс бара
            function startProgressBar() {
                resetProgressBar();
                
                const startTime = Date.now();
                const updateProgress = () => {
                    if (!isPlaying) return;
                    
                    const elapsed = Date.now() - startTime;
                    const percentage = Math.min(100, (elapsed / intervalTime) * 100);
                    progress.style.width = `${percentage}%`;
                    
                    if (percentage < 100) {
                        requestAnimationFrame(updateProgress);
                    }
                };
                
                requestAnimationFrame(updateProgress);
            }
            
            // Остановка прогресс бара
            function stopProgressBar() {
                // Прогресс бар останавливается автоматически при остановке анимации
            }
            
            // Включение полноэкранного режима
            function enterFullscreen() {
                if (images.length === 0) return;
                
                fullscreenMode.classList.remove('hidden');
                updateFullscreenSlide();
                
                if (isPlaying) {
                    stopSlideshow();
                    startSlideshow();
                }
            }
            
            // Выход из полноэкранного режима
            function exitFullscreen() {
                fullscreenMode.classList.add('hidden');
            }
            
            // Обновление слайда в полноэкранном режиме
            function updateFullscreenSlide() {
                fullscreenImg.src = images[currentSlideIndex];
            }
            
            // Включение элементов управления
            function enableControls() {
                prevBtn.disabled = false;
                playPauseBtn.disabled = false;
                nextBtn.disabled = false;
                fullscreenBtn.disabled = false;
                intervalInput.disabled = false;
                transitionInput.disabled = false;
            }
            
            // Отключение элементов управления
            function disableControls() {
                prevBtn.disabled = true;
                playPauseBtn.disabled = true;
                nextBtn.disabled = true;
                fullscreenBtn.disabled = true;
                intervalInput.disabled = true;
                transitionInput.disabled = true;
            }
            
            // Обработчики событий
            prevBtn.addEventListener('click', () => {
                prevSlide();
                if (isPlaying) {
                    stopSlideshow();
                    startSlideshow();
                }
            });
            
            playPauseBtn.addEventListener('click', () => {
                if (isPlaying) {
                    stopSlideshow();
                } else {
                    startSlideshow();
                }
            });
            
            nextBtn.addEventListener('click', () => {
                nextSlide();
                if (isPlaying) {
                    stopSlideshow();
                    startSlideshow();
                }
            });
            
            fullscreenBtn.addEventListener('click', enterFullscreen);
            
            intervalInput.addEventListener('input', () => {
                intervalTime = parseInt(intervalInput.value) * 1000;
                intervalValue.textContent = intervalInput.value;
                
                if (isPlaying) {
                    stopSlideshow();
                    startSlideshow();
                }
            });
            
            transitionInput.addEventListener('input', () => {
                transitionTime = parseFloat(transitionInput.value) * 1000;
                transitionValue.textContent = transitionInput.value;
                
                // Обновляем transition time для всех слайдов
                document.querySelectorAll('.slide').forEach(slide => {
                    slide.style.transition = `opacity ${transitionTime/1000}s ease`;
                });
            });
            
            // Обработчики для полноэкранного режима
            fsPrevBtn.addEventListener('click', () => {
                prevSlide();
                if (isPlaying) {
                    stopSlideshow();
                    startSlideshow();
                }
            });
            
            fsPlayPauseBtn.addEventListener('click', () => {
                if (isPlaying) {
                    stopSlideshow();
                } else {
                    startSlideshow();
                }
            });
            
            fsNextBtn.addEventListener('click', () => {
                nextSlide();
                if (isPlaying) {
                    stopSlideshow();
                    startSlideshow();
                }
            });
            
            fullscreenClose.addEventListener('click', exitFullscreen);
            
            // Закрытие полноэкранного режима по ESC
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && !fullscreenMode.classList.contains('hidden')) {
                    exitFullscreen();
                }
            });
        });
    </script>
</body>
</html>
