<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Alerts & Watchlist</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Общие стили */
        body {
            background-color: #111827;
            color: #E5E7EB;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* Стили алертов */
        .alert-card {
            background-color: #1E1E1E;
            border-radius: 0.5rem;
            border: 1px solid #374151;
            margin-bottom: 1rem;
        }
        
        .alert-header {
            background-color: #1F2937;
            padding: 0.75rem 1rem;
            border-bottom: 1px solid #374151;
        }
        
        /* Стили ватчлиста */
        .watchlist-panel {
            background-color: #1E1E1E;
            border-radius: 0.5rem;
            border: 1px solid #374151;
            margin-bottom: 1rem;
        }
        
        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 1rem;
            background-color: #1F2937;
            color: #E5E7EB;
            border-bottom: 1px solid #374151;
        }
        
        .input-group {
            display: flex;
            margin-bottom: 0.5rem;
        }
        
        .ticker-input {
            flex-grow: 1;
            background-color: #1F2937;
            border: 1px solid #4B5563;
            color: #E5E7EB;
            padding: 0.5rem 1rem;
            border-radius: 0.25rem 0 0 0.25rem;
            outline: none;
        }
        
        .add-btn {
            background-color: #3B82F6;
            color: white;
            border: none;
            padding: 0 1rem;
            border-radius: 0 0.25rem 0.25rem 0;
            cursor: pointer;
        }
        
        .ticker-list {
            list-style: none;
            padding: 0;
            margin: 0;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .ticker-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem 1rem;
            border-bottom: 1px solid #374151;
        }
    </style>
</head>
<body class="bg-gray-900">
    <div class="container mx-auto px-4 py-6">
        <!-- Секция алертов -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
            <!-- Форма создания алерта -->
            <div class="alert-card">
                <div class="alert-header">
                    <h2 class="text-lg font-semibold">
                        <i class="fas fa-plus-circle mr-2 text-blue-500"></i>
                        Создать новый алерт
                    </h2>
                </div>
                <div class="p-4">
                    <form id="alertForm">
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-1">Криптовалюта</label>
                            <div class="relative">
                                <input type="text" id="coinSearch" placeholder="BTCUSDT, ETHUSDT..." 
                                    class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded">
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-1">Тип алерта</label>
                            <select id="alertType" class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded">
                                <option value="price">Цена</option>
                                <option value="percent">Процент</option>
                            </select>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-sm font-medium mb-1">Условие</label>
                            <div class="flex">
                                <select id="condition" class="w-1/3 px-3 py-2 bg-gray-800 border border-gray-700 rounded-l">
                                    <option value=">">Выше</option>
                                    <option value="<">Ниже</option>
                                </select>
                                <input type="number" id="value" placeholder="Значение" step="0.0001"
                                    class="w-2/3 px-3 py-2 bg-gray-800 border-t border-b border-r border-gray-700 rounded-r">
                            </div>
                        </div>
                        
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded">
                            <i class="fas fa-bell mr-2"></i>Создать алерт
                        </button>
                    </form>
                </div>
            </div>
            
            <!-- Список активных алертов -->
            <div class="alert-card">
                <div class="alert-header">
                    <h2 class="text-lg font-semibold">
                        <i class="fas fa-bell mr-2 text-blue-500"></i>
                        Активные алерты
                    </h2>
                </div>
                <div class="p-4">
                    <div class="mb-4">
                        <input type="text" id="alertSearch" placeholder="Поиск алертов..." 
                            class="w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded">
                    </div>
                    <ul id="activeAlerts" class="space-y-2">
                        <!-- Алерты будут добавляться сюда -->
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Секция ватчлиста -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <!-- Long -->
            <div class="watchlist-panel">
                <div class="panel-header">
                    <h3 class="font-medium">
                        <i class="fas fa-arrow-trend-up mr-2 text-green-500"></i>
                        WATCHLIST LONG
                    </h3>
                    <button class="text-sm text-gray-400 hover:text-white" onclick="clearAllTickers('long')">
                        Очистить
                    </button>
                </div>
                <div class="p-4">
                    <div class="input-group">
                        <input type="text" id="long-input" placeholder="BTCUSDT, ETHUSDT..." 
                            class="ticker-input">
                        <button class="add-btn" onclick="addTicker('long')">+</button>
                    </div>
                    <ul id="long-list" class="ticker-list">
                        <!-- Тут будут тикеры -->
                    </ul>
                </div>
            </div>
            
            <!-- Short -->
            <div class="watchlist-panel">
                <div class="panel-header">
                    <h3 class="font-medium">
                        <i class="fas fa-arrow-trend-down mr-2 text-red-500"></i>
                        WATCHLIST SHORT
                    </h3>
                    <button class="text-sm text-gray-400 hover:text-white" onclick="clearAllTickers('short')">
                        Очистить
                    </button>
                </div>
                <div class="p-4">
                    <div class="input-group">
                        <input type="text" id="short-input" placeholder="BTCUSDT, ETHUSDT..." 
                            class="ticker-input">
                        <button class="add-btn" onclick="addTicker('short')">+</button>
                    </div>
                    <ul id="short-list" class="ticker-list">
                        <!-- Тут будут тикеры -->
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Функции для ватчлиста
        function addTicker(type) {
            const input = document.getElementById(`${type}-input`);
            const ticker = input.value.trim().toUpperCase();
            const list = document.getElementById(`${type}-list`);
            
            if (!ticker) return;
            
            const li = document.createElement('li');
            li.className = 'ticker-item';
            li.innerHTML = `
                <span>${ticker}</span>
                <div>
                    <button class="text-blue-400 hover:text-blue-300 mr-2">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="text-red-400 hover:text-red-300" onclick="removeTicker(this, '${type}')">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div>
            `;
            
            list.appendChild(li);
            input.value = '';
            saveWatchlist();
        }
        
        function removeTicker(btn, type) {
            const li = btn.closest('li');
            li.remove();
            saveWatchlist();
        }
        
        function clearAllTickers(type) {
            if (confirm('Очистить весь список?')) {
                document.getElementById(`${type}-list`).innerHTML = '';
                saveWatchlist();
            }
        }
        
        function saveWatchlist() {
            const watchlist = {
                long: getTickers('long'),
                short: getTickers('short')
            };
            localStorage.setItem('cryptoWatchlist', JSON.stringify(watchlist));
        }
        
        function getTickers(type) {
            const items = document.getElementById(`${type}-list`).children;
            return Array.from(items).map(li => li.textContent.trim().split('\n')[0]);
        }
        
        function loadWatchlist() {
            const saved = localStorage.getItem('cryptoWatchlist');
            if (!saved) return;
            
            const watchlist = JSON.parse(saved);
            
            watchlist.long.forEach(ticker => {
                document.getElementById('long-list').innerHTML += `
                    <li class="ticker-item">
                        <span>${ticker}</span>
                        <div>
                            <button class="text-blue-400 hover:text-blue-300 mr-2">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-400 hover:text-red-300" onclick="removeTicker(this, 'long')">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </li>
                `;
            });
            
            watchlist.short.forEach(ticker => {
                document.getElementById('short-list').innerHTML += `
                    <li class="ticker-item">
                        <span>${ticker}</span>
                        <div>
                            <button class="text-blue-400 hover:text-blue-300 mr-2">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="text-red-400 hover:text-red-300" onclick="removeTicker(this, 'short')">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </li>
                `;
            });
        }
        
        // Функции для алертов
        function setupAlertForm() {
            document.getElementById('alertForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const coin = document.getElementById('coinSearch').value;
                const type = document.getElementById('alertType').value;
                const condition = document.getElementById('condition').value;
                const value = document.getElementById('value').value;
                
                if (!coin || !value) return;
                
                addAlert(coin, type, condition, value);
                this.reset();
            });
        }
        
        function addAlert(coin, type, condition, value) {
            const alertsList = document.getElementById('activeAlerts');
            const alertId = Date.now();
            
            alertsList.innerHTML += `
                <li class="alert-item p-3 bg-gray-800 rounded flex justify-between items-center" data-id="${alertId}">
                    <div>
                        <span class="font-medium">${coin}</span>
                        <span class="text-sm text-gray-400">${condition} ${value}</span>
                    </div>
                    <button class="text-red-400 hover:text-red-300" onclick="removeAlert(${alertId})">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </li>
            `;
            
            saveAlerts();
        }
        
        function removeAlert(id) {
            document.querySelector(`.alert-item[data-id="${id}"]`).remove();
            saveAlerts();
        }
        
        function saveAlerts() {
            const alerts = [];
            document.querySelectorAll('.alert-item').forEach(item => {
                alerts.push({
                    id: item.dataset.id,
                    coin: item.querySelector('span').textContent,
                    condition: item.querySelector('span:nth-child(2)').textContent
                });
            });
            localStorage.setItem('cryptoAlerts', JSON.stringify(alerts));
        }
        
        function loadAlerts() {
            const saved = localStorage.getItem('cryptoAlerts');
            if (!saved) return;
            
            JSON.parse(saved).forEach(alert => {
                document.getElementById('activeAlerts').innerHTML += `
                    <li class="alert-item p-3 bg-gray-800 rounded flex justify-between items-center" data-id="${alert.id}">
                        <div>
                            <span class="font-medium">${alert.coin}</span>
                            <span class="text-sm text-gray-400">${alert.condition}</span>
                        </div>
                        <button class="text-red-400 hover:text-red-300" onclick="removeAlert(${alert.id})">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                    </li>
                `;
            });
        }
        
        // Инициализация
        document.addEventListener('DOMContentLoaded', function() {
            loadWatchlist();
            loadAlerts();
            setupAlertForm();
            
            // Обработчики Enter для ватчлиста
            ['long-input', 'short-input'].forEach(id => {
                document.getElementById(id).addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const type = id.split('-')[0];
                        addTicker(type);
                    }
                });
            });
        });
    </script>
</body>
</html>
